<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>과제</title>
    <style>
        #result{
            text-align: center;
        }
        div{
            display: flex;
            justify-content: center;
        }
        .type{
            width: 300px;
            height: 300px;
        }
        #reset{
            display: block;
            margin: auto;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <h3>
        가위바위보 게임
    </h3>
    <div>
        <button type="button"><img src="/img/rock.png" alt="" onclick="rcp('rock')" class="type"></button>
        <button type="button"><img src="/img/scissors.png" alt="" onclick="rcp('scissors')" class="type"></button>
        <button type="button"><img src="/img/paper.png" alt="" onclick="rcp('paper')" class="type"></button>
    </div>
    <button type="button" onclick="reset()" id="reset">초기화버튼</button>
    <h3 id="result">

    </h3>

    <script>
        function random(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }
        
        let count = 0;
        let win = 0;
        let lose = 0;
        let draw = 0;
        let win_rate = 0;
        function reset(){
            let tmp='';
            count=0;
            win=0;
            lose=0;
            draw=0;
            win_rate=0;
            
            tmp = `플레이어 : <br> cpu : <br>승 : ${win} <br> 패 : ${lose} <br> 무 : ${draw} <br> 판수 : ${count} <br> 승률 : ${win_rate}%`;
            document.getElementById('result').innerHTML = tmp;
        }
        
        function rcp(value) {
            let tmp="";

                let cpu = random(1, 3);
                let cpu_rcp = "";
                let player_rcp = "";
                switch (cpu) {
                    case 1:
                        cpu_rcp = "rock"
                        break;
                    case 2:
                        cpu_rcp = "scissors"
                        break;
                    default:
                        cpu_rcp = "paper"
                        break;
                }

                switch (value) {
                    case 'rock':
                        if (cpu_rcp == value) {
                            draw++;
                            alert('비겼습니다!');
                        }
                        else if (cpu_rcp == 'scissors') {
                            win++;
                            alert('이겼습니다!');
                        }
                        else {
                            lose++;
                            alert('졌습니다!');
                        }
                        break;
                    case 'scissors':
                        if (cpu_rcp == 'rock') {
                            lose++;
                            alert('졌습니다!');
                        }
                        else if (cpu_rcp == value) {
                            draw++;
                            alert('비겼습니다!');
                        }
                        else {
                            win++;
                            alert('이겼습니다!');
                        }
                        break;
                    case 'paper':
                        if (cpu_rcp == 'rock') {
                            win++;
                            alert('이겼습니다!');
                        }
                        else if (cpu_rcp == 'scissors') {
                            lose++;
                            alert('졌습니다!');
                        }
                        else {
                            draw++;
                            alert('비겼습니다!');
                        }
                        break;
                }    
                count++;
                win_rate = Math.round((win/count)*100);
                
                tmp = `플레이어 : ${value} <br>cpu : ${cpu_rcp}<br>승 : ${win} <br> 패 : ${lose} <br> 무 : ${draw} <br> 판수 : ${count} <br> 승률 : ${win_rate}%`;
                document.getElementById('result').innerHTML = tmp;
        }
    </script>
</body>
</html>